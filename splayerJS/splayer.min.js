/*! sPlayer v1.0.1 b10170 | Â© Manar Kamel (manarkamel.github.io) */String.prototype.toMMSS=function(){var a=parseInt(this,10),b=Math.floor(a/60),c=a-60*b;10>c&&(c="0"+c);var d=b+":"+c;return d},playListsContainer||(playListsContainer="body");var sP={audio:new Audio,play:function(a,b){if(a){if(a&&(sP.audio.src=$(a).attr("data-song"),sP.audio.load(),sP.audio.play(),$(playList+" li").removeClass("nowplaying wasplaying"),$(a).addClass("nowplaying"),currentLoopBtn&&$(currentLoopBtn).removeClass("islooped"),currentStarBtn&&$(a).find(starBtn+".isstarred").length?$(currentStarBtn).addClass("isstarred"):currentStarBtn&&!$(a).find(starBtn+".isstarred").length&&$(currentStarBtn).removeClass("isstarred"),currentDownloadBtn&&$(a).find(downloadBtn+".isdownloaded").length?$(currentDownloadBtn).addClass("isdownloaded"):currentDownloadBtn&&!$(a).find(downloadBtn+".isdownloaded").length&&$(currentDownloadBtn).removeClass("isdownloaded"),songDuration&&sP.audio.duration!=sP.audio.duration&&$(songDuration).text("0:00"),lastPlayedSongIdStorage&&$(a).not("[id^=sLID]").attr("id"))){var c=$(a).attr("id");localStorage.setItem("lastPlayedID",c)}}else sP.audio.play(),$(playList+" li.wasplaying").removeClass("wasplaying");b&&radioTime&&sP.audio.addEventListener("timeupdate",function(a){var b=parseInt(sP.audio.currentTime,10).toString(),c=b.toMMSS();$(radioTime).html(c)}),$(playBtn).addClass("nowplaying")},pause:function(){sP.audio.pause(),$(pauseBtn).removeClass("nowplaying"),$(playList+" li.nowplaying").addClass("wasplaying")},next:function(){if(!$(playList+" li.nowplaying:not(:last-child)").length)return!1;var a=$(playList+" li.nowplaying").next();sP.play(a)},prev:function(){if(!$(playList+" li.nowplaying:not(:first-child)").length)return!1;var a=$(playList+" li.nowplaying").prev();sP.play(a)},star:function(a){var b="";a?a&&(b=a):b=playList+" li.nowplaying";var c=$(b).attr("id"),d=$("#"+c).clone();if($(d).attr({"data-id":c,id:""}),$(starredList+" ul").append(d),noStarredList&&$(noStarredList).addClass("passive"),currentStarBtn&&$(b).hasClass("nowplaying")&&$(currentStarBtn).addClass("isstarred"),$(starredList+" li "+starBtn).addClass("isstarred"),$(b).find(starBtn).addClass("isstarred"),starredListStorage){var e=$(playList+" li[id] "+starBtn+".isstarred").parents("li").map(function(){return this.id}).get().join(",");localStorage.setItem("starredSongs",e)}},unstar:function(a){var b="";a?a&&(b=a):b=playList+" li.nowplaying";var c=$(b).attr("id")||$(b).attr("data-id");if($(starredList+" li[data-id="+c+"]").remove(),$("#"+c).find(starBtn).removeClass("isstarred"),noStarredList&&0==$(starredList+" li").length&&$(noStarredList).removeClass("passive"),currentStarBtn&&$(b).hasClass("nowplaying")&&$(currentStarBtn).removeClass("isstarred"),$(b).find(starBtn).removeClass("isstarred"),starredListStorage){var d=$(playList+" li[id] "+starBtn+".isstarred").parents("li").map(function(){return this.id}).get().join(",");localStorage.setItem("starredSongs",d)}},search:function(a){var b="";b=starredList?playList+":not("+starredList+") li[id]":playList+" li[id]",$(b).each(function(){if($(this).text().search(new RegExp(a,"i"))<0){var b=$(this).attr("id");$(resultsList+" li[data-id="+b+"]").remove()}else{var b=$(this).attr("id"),c=$(this).clone(),d={};$(c).attr({"data-id":b,id:""}),$(resultsList+" ul").append(c),$(resultsList+" li").each(function(){var a=$(this).attr("data-id");d[a]?$(this).remove():d[a]="true"})}}),noResultsList&&0==$(resultsList+" li").length?$(noResultsList).show():noResultsList&&$(resultsList+" li").length>0&&$(noResultsList).hide()},"import":function(a,b){ID3v2.parseFile(a[b],function(c){var d;window.createObjectURL?d=window.createObjectURL(a[b]):window.createBlobURL?d=window.createBlobURL(a[b]):window.URL&&window.URL.createObjectURL?d=window.URL.createObjectURL(a[b]):window.webkitURL&&window.webkitURL.createObjectURL&&(d=window.webkitURL.createObjectURL(a[b]));var e="sLID"+b,f=importDefaultArt||"";if(c.pictures.length>0&&c.pictures[0].dataURL&&""==c.pictures[0].Description)return f=c.pictures[0].dataURL,sPimportBeta(a[b],c,d,e,f);if(!c.Album||!c.Artist)return sPimportBeta(a[b],c,d,e,f);var g=c.Album.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,""),h=c.Artist.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,""),i="https://api.spotify.com/v1/search?q=album:"+g+"%20artist:"+h+"&type=album",j=i.replace(/ /g,"%20");$.getJSON(j,function(g){$.each(g,function(g,h){return h.items[0]&&(f=h.items[0].images[1].url),sPimportBeta(a[b],c,d,e,f)})}).fail(function(){return sPimportBeta(a[b],c,d,e,f)})})},share:function(a){var b=window.location.href,c=b.indexOf("?share="),d=b.substr(c+7);return c>-1&&$("#"+d).length?a(d):void 0},lastPlayed:function(a){var b=localStorage.getItem("lastPlayedID"),c=window.location.href,d=c.indexOf("?share=");c.substr(d+7);return b&&-1==d?a(b):void 0},clear:function(a){"starredListStorage"==a?localStorage.removeItem("starredSongs"):"importStorage"==a&&(localforage.removeItem("selectedFiles"),$(importLocalFiles).wrap("<form>").closest("form").get(0).reset(),$(importLocalFiles).unwrap())}};$(playerContainer).on("click",playBtn,function(){sP.play()}),$(playerContainer).on("click",pauseBtn,function(){sP.pause()}),$(playListsContainer).on("click",playList+" li.nowplaying.wasplaying",function(){sP.play()}),$(playListsContainer).on("click",playList+" li.nowplaying:not(.wasplaying)",function(){sP.pause()}),$(playListsContainer).on("click",playList+" li:not(.nowplaying):not(.wasplaying)",function(){sP.play(this)}),nextBtn&&$(nextBtn).click(sP.next),prevBtn&&$(prevBtn).click(sP.prev),(songDuration||songCurrentTime)&&sP.audio.addEventListener("loadedmetadata",function(a){var b=parseInt(sP.audio.duration,10).toString(),c=b.toMMSS(),d=parseInt(sP.audio.currentTime,10).toString(),e=d.toMMSS();songDuration&&(sP.audio.duration!=sP.audio.duration?$(songDuration).text("0:00"):$(songDuration).text(c)),songCurrentTime&&$(songCurrentTime).text(e)}),playerSlider&&$(playerSlider).on("change",function(){sP.audio.currentTime=$(playerSlider).val(),sP.audio.play(),$(playBtn).addClass("nowplaying"),$(playList+" li.wasplaying").removeClass("wasplaying")}),(playerSlider||playerSliderProgress||songCurrentTime)&&sP.audio.addEventListener("timeupdate",function(a){playerSlider&&$(playerSlider).attr("max",sP.audio.duration).attr("value",sP.audio.currentTime);var b=parseInt(sP.audio.currentTime,10).toString(),c=b.toMMSS();if(playerSliderProgress){var d=100*sP.audio.currentTime/sP.audio.duration+"%";$(playerSliderProgress).css("width",d)}songCurrentTime&&$(songCurrentTime).text(c)}),currentLoopBtn&&$(currentLoopBtn).click(function(){function a(){return $(currentLoopBtn+".islooped").length?(sP.audio.play(),playerSlider&&$(playerSlider).val(sP.audio.currentTime),$(playBtn).addClass("nowplaying"),$(playList+" li.nowplaying").removeClass("wasplaying"),void 0):!1}$(this).toggleClass("islooped"),sP.audio.addEventListener("ended",a)}),sP.audio.addEventListener("ended",function(){!currentLoopBtn&&$(playList+" li.nowplaying:not(:last-child)").length?sP.next():currentLoopBtn&&$(playList+" li.nowplaying:not(:last-child)").length&&$(currentLoopBtn+":not(.islooped)").length?sP.next():sP.pause()}),currentStarBtn&&$(currentStarBtn).click(function(a){$(this).hasClass("isstarred")?sP.unstar():sP.star()}),starBtn&&$(playListsContainer).on("click",starBtn,function(a){a.stopPropagation(),a.preventDefault();var b=$(this).parent();$(this).hasClass("isstarred")?sP.unstar(b):sP.star(b)}),currentDownloadBtn&&$(currentDownloadBtn).click(function(a){var b=$(playList+" li.nowplaying "+downloadBtn),c=b.children(),d=c.attr("href");$(this).toggleClass("isdownloaded"),b.toggleClass("isdownloaded"),$(this).children().attr("href",d)}),downloadBtn&&$(playListsContainer).on("click",downloadBtn,function(a){a.stopPropagation(),$(this).toggleClass("isdownloaded");var b=$(this).parent();$(this).hasClass("isdownloaded")?currentDownloadBtn&&$(b).hasClass("nowplaying")&&$(currentDownloadBtn).addClass("isdownloaded"):currentDownloadBtn&&$(b).hasClass("nowplaying")&&$(currentDownloadBtn).removeClass("isdownloaded")}),currentShareBtn&&currentShareLink&&$(currentShareBtn).click(function(){var a=$(playList+" li.nowplaying").attr("id"),b=window.location.href.split("?share=")[0],c=b+"?share="+a;$(currentShareLink).text(c)}),liveSearch&&$(liveSearch).keyup(function(){var a=$(this).val();sP.search(a)});var fileSlice=function(a,b,c){return a.mozSlice?a.mozSlice(b,b+c):a.webkitSlice?a.webkitSlice(b,b+c):a.slice?a.slice(b,c):void 0},ID3v2={parseStream:function(a,b){function c(b,c){a(b,c,s)}function d(a){for(var b,c,d,e,f,g,h,i="",j=0,k=a.length,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";k>j;)b=a.charCodeAt(j++),c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,h=63&d,isNaN(c)?g=h=64:isNaN(d)&&(h=64),i=i+l.charAt(e)+l.charAt(f)+l.charAt(g)+l.charAt(h);return i}function e(a){var b=parseInt(k(a)),c=Math.floor(b/1e3),d=Math.floor(c/60),e=Math.floor(d/60),f=Math.floor(e/24);return{milliseconds:b%1e3,seconds:c%60,minutes:d%60,hours:e%24,days:f}}function f(a){var b=a.toString(2);return new Array(8-b.length+1).join("0")+b}function g(a){if(4==a.length)if(r.revision>3){var b=a[0]<<21;b+=a[1]<<14,b+=a[2]<<7,b+=a[3]}else{var b=a[0]<<24;b+=a[1]<<16,b+=a[2]<<8,b+=a[3]}else{var b=a[0]<<16;b+=a[1]<<8,b+=a[2]}return b}function h(a){a.charCodeAt(0);a=a.substr(1);var b=a.indexOf("\x00"),c=a.substr(0,b);a=a.substr(b+1);var e=a.charCodeAt(0),f=n[e.toString(16).toUpperCase()];a=a.substr(1);var g=a.indexOf("\x00"),h=a.substr(0,g);a=a.substr(g+1);var i=a,j=i.split("").map(function(a){return String.fromCharCode(255&a.charCodeAt(0))}).join("");return{dataURL:"data:"+c+";base64,"+d(j),PictureType:f,Description:h,MimeType:c}}function i(a){a.charCodeAt(0);a=a.substr(1);var b=a.substr(0,3);a=a.substr(3);var c=a.charCodeAt(0),e=n[c.toString(16).toUpperCase()];a=a.substr(1);var f=a.indexOf("\x00"),g=a.substr(0,f);a=a.substr(f+1);var h=a,i=h.split("").map(function(a){return String.fromCharCode(255&a.charCodeAt(0))}).join("");return{dataURL:"data:img/"+b+";base64,"+d(i),PictureType:e,Description:g,MimeType:MimeType}}function j(){r.revision<3?c(3,function(a){if(!/[A-Z0-9]{3}/.test(a))return void b(r);var c=p[a.substr(0,3)];m(a,c)}):c(4,function(a){return/[A-Z0-9]{4}/.test(a)?void l(a):void b(r)})}function k(a){if(0!=a.indexOf("http://")){a.charCodeAt(0);a=a.substr(1)}return a.replace(/[^A-Za-z0-9\(\)\{\}\[\]\!\@\#\$\%\^\&\* \/\"\'\;\>\<\?\,\~\`\.\n\t]/g,"")}function l(a){c(4,function(b,d){var e=g(d);c(2,function(b,d){d=f(d[0]).concat(f(d[1])),c(e,function(b,c){"function"==typeof t[a]?t[a](e,b,c):o[a]?r[o[a]]=(r[o[a]]||"")+k(b):r[a]=k(b),j()})})})}function m(a,b){c(3,function(d,e){var f=g(e);c(f,function(c,d){"function"==typeof t[a]?t[a](f,c,d):"function"==typeof t[b]?t[b](f,c,d):o[b]?r[o[b]]=(r[o[b]]||"")+k(c):r[b]=k(c),j()})})}var n={0:"Other",1:"32x32 pixels 'file icon' (PNG only)",2:"Other file icon",3:"Cover (front)",4:"Cover (back)",5:"Leaflet page",6:"Media (e.g. lable side of CD)",7:"Lead artist/lead performer/soloist",8:"Artist/performer",9:"Conductor",A:"Band/Orchestra",B:"Composer",C:"Lyricist/text writer",D:"Recording Location",E:"During recording",F:"During performance",10:"Movie/video screen capture",11:"A bright coloured fish",12:"Illustration",13:"Band/artist logotype",14:"Publisher/Studio logotype"},o={AENC:"Audio encryption",APIC:"Attached picture",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVAD:"Relative volume adjustment",RVRB:"Reverb",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album",TBPM:"BPM",TCOM:"Composer",TCON:"Genre",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TENC:"Encoded by",TEXT:"Lyricist",TFLT:"File type",TIME:"Time",TIT1:"Content group description",TIT2:"Title",TIT3:"Subtitle",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMED:"Media type",TOAL:"Original album",TOFN:"Original filename",TOLY:"Original lyricist",TOPE:"Original artist",TORY:"Original release year",TOWN:"File owner",TPE1:"Artist",TPE2:"Band",TPE3:"Conductor",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPUB:"Publisher",TRCK:"Track number",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"},p={BUF:"RBUF",COM:"COMM",CRA:"AENC",EQU:"EQUA",ETC:"ETCO",GEO:"GEOB",MCI:"MCDI",MLL:"MLLT",PIC:"APIC",POP:"POPM",REV:"RVRB",RVA:"RVAD",SLT:"SYLT",STC:"SYTC",TAL:"TALB",TBP:"TBPM",TCM:"TCOM",TCO:"TCON",TCR:"TCOP",TDA:"TDAT",TDY:"TDLY",TEN:"TENC",TFT:"TFLT",TIM:"TIME",TKE:"TKEY",TLA:"TLAN",TLE:"TLEN",TMT:"TMED",TOA:"TOPE",TOF:"TOFN",TOL:"TOLY",TOR:"TORY",TOT:"TOAL",TP1:"TPE1",TP2:"TPE2",TP3:"TPE3",TP4:"TPE4",TPA:"TPOS",TPB:"TPUB",TRC:"TSRC",TRD:"TRDA",TRK:"TRCK",TSI:"TSIZ",TSS:"TSSE",TT1:"TIT1",TT2:"TIT2",TT3:"TIT3",TXT:"TEXT",TXX:"TXXX",TYE:"TYER",UFI:"UFID",ULT:"USLT",WAF:"WOAF",WAR:"WOAR",WAS:"WOAS",WCM:"WCOM",WCP:"WCOP",WPB:"WPB",WXX:"WXXX"},q={0:"Blues",1:"Classic Rock",2:"Country",3:"Dance",4:"Disco",5:"Funk",6:"Grunge",7:"Hip-Hop",8:"Jazz",9:"Metal",10:"New Age",11:"Oldies",12:"Other",13:"Pop",14:"R&B",15:"Rap",16:"Reggae",17:"Rock",18:"Techno",19:"Industrial",20:"Alternative",21:"Ska",22:"Death Metal",23:"Pranks",24:"Soundtrack",25:"Euro-Techno",26:"Ambient",27:"Trip-Hop",28:"Vocal",29:"Jazz+Funk",30:"Fusion",31:"Trance",32:"Classical",33:"Instrumental",34:"Acid",35:"House",36:"Game",37:"Sound Clip",38:"Gospel",39:"Noise",40:"AlternRock",41:"Bass",42:"Soul",43:"Punk",44:"Space",45:"Meditative",46:"Instrumental Pop",47:"Instrumental Rock",48:"Ethnic",49:"Gothic",50:"Darkwave",51:"Techno-Industrial",52:"Electronic",53:"Pop-Folk",54:"Eurodance",55:"Dream",56:"Southern Rock",57:"Comedy",58:"Cult",59:"Gangsta",60:"Top 40",61:"Christian Rap",62:"Pop/Funk",63:"Jungle",64:"Native American",65:"Cabaret",66:"New Wave",67:"Psychadelic",68:"Rave",69:"Showtunes",70:"Trailer",71:"Lo-Fi",72:"Tribal",73:"Acid Punk",74:"Acid Jazz",75:"Polka",76:"Retro",77:"Musical",78:"Rock & Roll",79:"Hard Rock",80:"Folk",81:"Folk-Rock",82:"National Folk",83:"Swing",84:"Fast Fusion",85:"Bebob",86:"Latin",87:"Revival",88:"Celtic",89:"Bluegrass",90:"Avantgarde",91:"Gothic Rock",92:"Progressive Rock",93:"Psychedelic Rock",94:"Symphonic Rock",95:"Slow Rock",96:"Big Band",97:"Chorus",98:"Easy Listening",99:"Acoustic",100:"Humour",101:"Speech",102:"Chanson",103:"Opera",104:"Chamber Music",105:"Sonata",106:"Symphony",107:"Booty Bass",108:"Primus",109:"Porn Groove",110:"Satire",111:"Slow Jam",112:"Club",113:"Tango",114:"Samba",115:"Folklore",116:"Ballad",117:"Power Ballad",118:"Rhythmic Soul",119:"Freestyle",120:"Duet",121:"Punk Rock",122:"Drum Solo",123:"A capella",124:"Euro-House",125:"Dance Hall"},r={pictures:[]},s=1/0,t={APIC:function(a,b,c){r.pictures.push(h(b))},PIC:function(a,b,c){r.pictures.push(i(b))},TLEN:function(a,b,c){r.Length=e(b)},TCON:function(a,b,c){if(b=k(b),/\([0-9]+\)/.test(b))var d=q[parseInt(b.replace(/[\(\)]/g,""))];else var d=b;r.Genre=d}};return c(3,function(a){return"ID3"!=a?(b(r),!1):void c(2,function(a,b){r.version="ID3v2."+b[0]+"."+b[1],r.revision=b[0],c(1,function(a,b){b=f(b[0]),c(4,function(a,b){s=g(b),c(0,function(){}),j()})})})}),r},parseURL:function(a,b){function c(a,b,c){f=a,g=b,h=c,0==a&&b("",[])}var d=new XMLHttpRequest;d.open("get",a,!0),d.overrideMimeType("text/plain; charset=x-user-defined");var e=0,f=0,g=function(){},h=1/0,i="";return function(){if(d.responseText&&(i=d.responseText),d.responseText.length>h&&d.abort(),i.length>e+f&&f){var a=i.substr(e,f),b=a.split("").map(function(a){return 255&a.charCodeAt(0)});if(e+=f,f=0,g(a,b)===!1)return void d.abort()}setTimeout(arguments.callee,0)}(),d.send(null),[d,ID3v2.parseStream(c,b)]},parseFile:function(a,b){function c(a,b,c){f=a,g=b,h=c,0==a&&b("",[])}var d=new FileReader,e=0,f=0,g=function(){},h=1/0,i="";return d.onload=function(){i=d.result},function(){if(i.length>e+f&&f){var a=i.substr(e,f),b=a.split("").map(function(a){return 255&a.charCodeAt(0)});if(e+=f,f=0,g(a,b)===!1)return}setTimeout(arguments.callee,0)}(),d.readAsBinaryString(fileSlice(a,0,131072)),[d,ID3v2.parseStream(c,b)]}};importLocalFiles&&$(importLocalFiles).on("change",function(){var a=function(a){var b=new Audio;return!(!b.canPlayType||!b.canPlayType(a).replace(/no/,""))},b=this.files;if(b){for(var c=[],d=a("audio/mpeg;"),e=a('audio/ogg; codecs="vorbis"'),f=a("audio/aac;"),g=a("audio/m4a;"),h=a("audio/mp4;"),i=0;i<b.length;i++){var j=b[i],k=j.webkitRelativePath||j.mozFullPath||j.urn||j.name;-1==k.indexOf(".AppleDouble")&&(-1!=j.name.indexOf("mp3")&&d&&c.push(j),-1==j.name.indexOf("ogg")&&-1==j.name.indexOf("oga")||!e||c.push(j),-1!=j.name.indexOf("aac")&&f&&c.push(j),-1!=j.name.indexOf("m4a")&&g&&c.push(j),-1!=j.name.indexOf("mp4")&&h&&c.push(j))}importStorage&&localforage.setItem("selectedFiles",c)}if(c.length)for(var i=0;i<c.length;i++)sP["import"](c,i)}),localStorage.getItem("starredSongs")&&!function(){var a=localStorage.getItem("starredSongs"),b=a.split(",");$.each(b,function(a,c){var d="#"+b[a];sP.star(d)})}(),importStorage&&localforage.getItem("selectedFiles",function(a,b){if(b)for(var c=0;c<b.length;c++)sP["import"](b,c);a&&console.log(a)});